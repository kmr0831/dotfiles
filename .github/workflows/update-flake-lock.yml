name: Update flake.lock
on:
  schedule:
     # 毎週日曜日朝 7:00 時
    - cron: "0 22 * * 6"
  workflow_dispatch:
permissions:
  contents: write
  pull-requests: write
jobs:
  flake:
    name: Update flake.lock
    runs-on: ubuntu-latest
    steps:
      - name: checkout
        uses: actions/checkout@v6
      - name: Install Nix
        uses: DeterminateSystems/determinate-nix-action@v3
      - name: Add Nix cache
        uses: DeterminateSystems/flakehub-cache-action@main
      - name: Check Nixpkgs
        uses: DeterminateSystems/flake-checker-action@main
      - name: Update flake.lock
        uses: DeterminateSystems/update-flake-lock@v28
        with:
          pr-title: "Update flake.lock"
          pr-labels: |
            dependencies
            automated
